
<div class="min-h-screen flex flex-col items-center bg-gradient-to-br from-[#0f172a] to-[#1e293b] pt-28" data-aos="fade-up" data-aos-duration="500">
  <h1 class="text-3xl md:text-4xl font-bold text-white mb-10 tracking-wide drop-shadow" data-aos="fade-up" data-aos-delay="700">Products</h1>
  <!-- Search, Filter, Sort Bar -->
  <div class="w-full max-w-6xl flex flex-wrap gap-4 items-center justify-between mb-8 px-4">
    <input type="text" placeholder="Search products..." class="px-4 py-2 rounded-xl bg-slate-800/70 text-white placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-sky-400 transition w-full sm:w-64"
      [value]="search()" (input)="onSearchInput($event)">
    <select class="px-4 py-2 rounded-xl bg-slate-800/70 text-white" [value]="selectedCategory() || ''" (change)="onCategoryChange($event)">
      <option value="">All Categories</option>
      <option *ngFor="let c of categories()" [value]="c.categoryId">{{c.name}}</option>
    </select>
    <select class="px-4 py-2 rounded-xl bg-slate-800/70 text-white" [value]="selectedColor() || ''" (change)="onColorChange($event)">
      <option value="">All Colors</option>
      <option *ngFor="let c of colors()" [value]="c.colorId">{{c.name}}</option>
    </select>
    <select class="px-4 py-2 rounded-xl bg-slate-800/70 text-white" [value]="selectedModel() || ''" (change)="onModelChange($event)">
      <option value="">All Models</option>
      <option *ngFor="let m of models()" [value]="m.modelId">{{m.name}}</option>
    </select>
    <select class="px-4 py-2 rounded-xl bg-slate-800/70 text-white" [value]="sortBy()" (change)="onSortChange($event)">
      <option value="">Sort By</option>
      <option value="price-asc">Price: Low to High</option>
      <option value="price-desc">Price: High to Low</option>
      <option value="name-asc">Name: A-Z</option>
      <option value="name-desc">Name: Z-A</option>
    </select>
  </div>
  <div *ngIf="loading()" class="text-sky-300 text-lg font-semibold animate-pulse">Loading products...</div>
  <div *ngIf="error()" class="text-red-400 text-lg font-semibold">{{ error() }}</div>
  <div *ngIf="!loading() && !error() && filteredProducts().length === 0" class="text-slate-400 text-lg">No products found.</div>
  <div *ngIf="!loading() && !error() && filteredProducts().length > 0" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8 w-full max-w-6xl px-4">
    <app-product-card *ngFor="let product of pagedProducts(); let i = index"
      [product]="product"
      (addToCart)="onAddToCart($event)"
      [attr.data-aos]="'zoom-in-up'"
      [attr.data-aos-delay]="100 + (i-1) * 500">
    </app-product-card>
  </div>
  <app-pagination
    *ngIf="!loading() && !error()"
    [page]="page()"
    [pageSize]="pageSize()"
    [total]="filteredProducts().length"
    (pageChange)="onPageChange($event)">
  </app-pagination>
</div>
